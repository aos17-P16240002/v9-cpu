## IX：受保护的高吞吐量和低延迟的数据平面操作系统

[原文链接](http://courses.cs.washington.edu/courses/cse551/15sp/papers/ix-osdi14.pdf)

随着互联网的发展，在数据中心的大型应用对网络的要求越来越高，要求对于短的消息要有高的包传输速率，远程访问请求要能够达到微秒级的响应时间，还要支持高的并发连接数。而且在数据中心中还要能够对重要资源有强大的保护能力，确保其它应用能够正常使用该资源。

但是目前的通用操作系统中存在的网络协议栈离这一要求还有很大差距。有一些研究人员提出绕过操作系统使用用户层的网络协议栈，虽然这样消除了在用户态和内核态来回切换的开销，但还是不能使延迟和吞吐率同时产生明显的改善，另外由于工作在用户态，协议栈会缺乏保护机制，可能会因为应用的bug导致网络协议栈崩溃。还有一些解决措施需要在网络连接的两端都使用特殊的设备，这种只能使用在数据中心的内部网络，缺乏更广泛的实用性。

另一方面，现在市场上高性能的网卡设备已经很常见，但是却因为系统网络协议栈或者其它原因，网卡的性能很难得到充分的发挥。

这篇文章中，作者提出并实现了IX的一个数据平面操作系统。借鉴了软件定义网络中将数据平面和控制平面分离的架构，但与其又有很大不同。控制平面使用一个完整的linux运行在vmx-root模式，数据平面是使用作者之前论文中提出的Dune，加上ix数据平面系统以及相应的库libix，工作在vmx-non-root模式，每个数据平面使用单独的地址空间，并且只运行了一网络服务程序，其中IX运行在内核态，libix和应用程序运行在用户态，这样就提供了安全保障。
通过CPU虚拟化技术，IX能够直接使用网卡设备，并且使用零拷贝技术降低系统消耗。通过这种架构充分发挥多核CPU以及高性能物理网卡的性能，加上一些优化措施，以达到高吞吐率和低延时。