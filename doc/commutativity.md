## The Scalable Commutativity Rule: Designing Scalable Software for Multicore Processors


##### 白帅 P5240002
<!-- 13年 best paper -->

<!-- 多核软件的可扩展性设计 -->

单核上主频发展受限，芯片朝着多核的方向发展。软件也需要进行并行化，但是对于并行化程序的可扩展问题却一直困扰着并行编程的发展，比如会出现并行程序的性能抖动，在核数增加到一定程度时，程序的性能不增反而骤降。可能的原因是因为多核对资源的抢占竞争等待或者多核间的通信复杂度增加等原因。

在系统内核中，对于多核扩展的支持也一直备受关注。内核中会涉及到许多共享资源的管理，所以许多的并行程序多核扩展性受到内核对多核支持的限制。

这篇文章从接口的设计层就考虑对多核并行的支持，可扩展性在编码之前，在进行接口设计时就充分的验证。无论何时，只要接口的执行可以交换而不产生不同的结果，这种情况就能够引入扩展的可能。基于这样可拓展交互原则，开发人员能够在接口的设计时就引入可扩展性。

作者以POSIX的一部分标准接口为例，根据可扩展交换的原则从设计语义上分析这些标准接口的缺陷以及可能的语义改进，并且根据提出的这些修改意见重新定义接口。并且对可扩展性做了测试，结果显示旧的标准的POSIX接口会产生大量的冲突，而新定义的接口的冲突适量则有了明显的减少。

按照新定义的接口对内核进行优化，形成新的系统内核sv6。与Linux内核相比，sv6在实验中能够获得一个很好的线性的加速比，而在Linux内核上性能几乎没有提升。

作者也提出了一些可扩展交互接口的设计原则：
* 将复合的操作分解，每个操作只负责一件事
* 采用规范非决定的设计
* 允许弱顺序的存在
* 使用异步方式释放资源

采用这种方式获得更好的扩展性与一般的测试－》找瓶颈－》优化－》再测试的方式有很大区别。一个是从顶层设计，而一个是自底向上的摸索。