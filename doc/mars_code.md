## Mars Code

##### P15240002 白帅

2012年8月好奇号火星车成功在火星着陆。火星车的整个发射、航行、着陆以及在火星上的工作都离不开软件的控制。这篇论文就介绍了软件设计团队在提高软件可靠性上采取的一些预防措施。

宇宙飞船控制软件的设计如同飞机飞行控制控制软件的设计一样必须具有高标准的可靠性，因为任何细小的错误都能造成无法挽回的损失。需要在硬件和软件上采取特别的措施，比如冗余来增加系统的可靠性，确保航天器正确运行。利用形式化验证来检查系统并发代码可能产生的争用和死锁情况。

具体的体现在编码过程中的可靠性保证主要是： 
* 基于风险的代码编写标准  
   软件设计团队在纪录的各种航天任务异常分析后，对根本原因进行分类，主要是基本的代码编写错误和设计错误，动态内存分配的错误使用。为此制定了代码编写标准，根据代码的重要程度，分为六个等级。
   1. Level 1. 最低的工艺标准，所有代码必须符合语言规范，不能包含编译器的扩展。
   2. Level 2. 确保嵌入式系统上下文中的可预测实行，所有循环在可执行迭代数 量上必须具有能够静态验证的上限
   3. Level 3. 断言的使用，代码中包涵的断言必须达到2%的比例。
   4. Level 4. 任务关键型代码的目标级别。限制对C与处理程序、函数指针和指针间接寻址的使用。
   5. Level 5. 73条MISRA必须遵守的规则。
   6. Level 6. 16条MISRA必须遵守的规则。
* 基于工具的严格代码审核
    利用静态源代码分析器审核代码是否符合规则、避免常见编写错误。
* 模型检查
    形式化验证任务关键型代码段中是否存在与并发相关的缺陷。
* 冗余措施
    硬件冗余和软件冗余。关键硬件组建都有备份。火星车着陆阶段同时使用主CPU和备用CPU，各自运行不同的着陆程序，一旦主CPU或者主着陆程序出错，备份CPU马上接管着陆控制，保证正常着陆。代码中的断言在火星车运行中始终得到满足，作为一种冗余保障措施，断言能尽早的发现程序运行中的异常，使得故障保护监控程序能够及时采取措施。


宇宙飞船的控制软件很难在真实的运行环境中进行测试，而运行错误有会造成无法挽回的损失，所以必须要花费极大的精力审核、分析、测试。
