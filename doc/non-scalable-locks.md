## Non-scalable locks are dangerous

##### P15240002 白帅

这篇文章主要是讨论锁机制在多核扩展中的问题。文中作者通过实验指出不可扩展的锁机制在并发的多核应用中会严重影响应用的性能，并且通过理论模型对这一现象进行解释。
作者提出，通过可扩展的锁机制能够很好地支持多核并发应用。

使用不可扩展的锁主要会产生这些问题。
* 不可扩展的锁会对实际系统的整体性能造成严重的影响。
* 不可扩展的锁会在增加很好的核时导致系统性能发生急剧坍塌式的下降。
* 即使是很少的几条指令，也会因为不可扩展的锁造成性能坍塌现象。

在Linux内核中使用的事spin-lock的锁机制，作者简单的介绍了spin-lock的工作机制：使用原子操作增加的一个令牌号码，一个核增加令牌号码时，其它的核才能获得锁，在这期间其他核就处于等待状态。
作者使用了4个基准测试在48核的机器上对Linux内核锁机制进行测试。
实验结果均产生了明显的坍塌现象。在FOPS测试集中，48个核上的吞吐量只有单个核吞吐量的3%。

针对测试结果，作者提出了几个问题并且建立了马尔可夫模型进行分析验证。这一模型很好地解释了为什么会出现测试结果中的问题。

后面介绍了可扩展锁机制，并且使用MCS Lock替换Linux内核中的令牌锁，进行了对比测试实验。试验结果中，使用MCS Lock没有出现性能坍塌现象。


论文的主要贡献是：
* 提出不可扩展的锁机制存在严重的问题，尤其是突然的性能坍塌。并通过实验进行证明。
* 建立了可以解释不可扩展锁问题的马尔可夫模型
* 使用可扩展锁机制进行对比实验，不存在坍塌现象

虽然大家都知道不可扩展的锁机制存在性能上的问题。但是却没人去进行全面的实验验证和对比，没能给出一个足够精确合理的模型解释性能问题。而这篇文章的作者们完成了这些事情。虽然是大家都知道的事情，但是能对它进行深入研究、探其本质原因、用理论解释清楚，也是能够得到认可的工作。这篇论文中创新点并不是很突出，但是其实验翔实，理论解释清晰。
